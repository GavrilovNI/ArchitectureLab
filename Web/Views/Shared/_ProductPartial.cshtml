@using System.Globalization
@using Microsoft.AspNetCore.Identity
@using Web.Areas.Identity.Data
@using Web.Data.Models
@model ProductInfo

@inject SignInManager<User> SignInManager

@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers



<div class="col-lg-4">
	@{
		if(@Model == null || @Model.Product == null) {
			<p>Product not found</p>
		}
		else
		{
			<img class="img-thumbnail" src="@Model.Product.LinkToImage" alt="@Model.Product.Name" />
			<h2>@Model.Product.Name</h2>
			<p>@Model.Product.Description</p>
			<p>Left: @Model.Product.AvaliableAmount</p>
			<p>Price: @Model.Product.Price.ToString("c", CultureInfo.CreateSpecificCulture("ru-RU"))</p>
			@if (SignInManager.IsSignedIn(User))
			{
				<div class="button-class">
					@{
						string idBtnAdd = "product-" + Model.Product.Id+"-add";
						string idBtnRemove = "product-" + Model.Product.Id+"-remove";
						string idCount = "product-" + Model.Product.Id+"-count";
					}
					<button type="button" id="@idBtnRemove" onclick="RemoveItem(@Model.Product.Id)">Remove</button>
					<button type="button" id="@idBtnAdd" onclick="AddItem(@Model.Product.Id)">Add</button>
					<br>
					Count: <p id="@idCount" >@Model.CountInCart</p>
				</div>
			}
			

		}
	}

</div>
